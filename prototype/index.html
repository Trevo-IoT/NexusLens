<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Nexus Lens v0.1.0</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
</head>
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.4.0/dist/chart.min.js"></script>
<body>
    <div class="top-toolbar">
        <button class="toolbar-btn back-icon white-icon"></button>
        <button class="toolbar-btn forward-icon white-icon"></button>
        <button class="toolbar-btn new-icon white-icon"></button>
        <button class="toolbar-btn open-icon white-icon"></button>
        <button class="toolbar-btn save-icon white-icon"></button>
    </div>
    <div class="content">
        <div class="tab-group">
            <div class="tab"><p class="unselectable">Terminal</p></div>
            <div class="tab tab-sel"><p class="unselectable">Gr치fico</p><button class="close-icon"></button></div>
            <div class="tab"><p class="unselectable">Playback</p></div>
            <div class="tab"><p class="unselectable">Bin치rio</p></div>
        </div>
        <div class="tab-content" id="tab-content">
            <div class="record-menu">
                <button class="toolbar-btn white-icon continue-icon" id="continue"></button>
                <button class="toolbar-btn white-icon stop-icon"></button>
                <button class="toolbar-btn white-icon backward-icon"></button>
                <button class="toolbar-btn white-icon forwardr-icon"></button>
                <button class="toolbar-btn record-icon"></button>
            </div>
        </div>
        <div class="inputbar" id="inputbar">
            <input type="text">
            <button class="inputbar-send"></button>
        </div>
        <div class="status-bar unselectable">
            <p>Recording</p>
        </div>
    </div>
</body>
<script>
/*---------- Terminal ---------*/
// var template = `<div class="termline-div"><p class="termtime unselectable">{0}</p><p class="termline">{1}</p></div>`

// var content =
// `matheuswhite@snowball:~$ cat get_token.py
// import requests
// import json

// payload = {
//     "auth": {
//         "identity": {
//             "methods": [
//                 "password"
//             ],
//             "password": {
//                 "user": {
//                     "name": "alfredolima",
//                     "password": "HWH9*rv3VwRa",
//                     "domain": {
//                         "name": "alfredolima"
//                     }
//                 }
//             }
//         },
//         "scope": {
//             "domain": {
//                 "name": "alfredolima"
//             }
//         }
//     }
// }
// headers = {'Content-Type': 'application/json;charset=utf8'}
// url = 'https://iam.ap-southeast-1.myhuaweicloud.com/v3/auth/tokens'
// response = requests.post(url, data=json.dumps(payload), headers=headers, hello, hello, hello, hello)

// print(json.dumps(response.json(), sort_keys=True, indent=4))
// print(response.headers['X-Subject-Token'])

// print(json.dumps(response.json(), sort_keys=True, indent=4))
// print(response.headers['X-Subject-Token'])

// print(json.dumps(response.json(), sort_keys=True, indent=4))
// print(response.headers['X-Subject-Token'])
// print(response.headers['X-Subject-Token'])

// print(json.dumps(response.json(), sort_keys=True, indent=4))
// print(response.headers['X-Subject-Token'])
// print(json.dumps(response.json(), sort_keys=True, indent=4))
// print(response.headers['X-Subject-Token'])

// print(json.dumps(response.json(), sort_keys=True, indent=4))
// print(response.headers['X-Subject-Token'])

// print(json.dumps(response.json(), sort_keys=True, indent=4))
// print(response.headers['X-Subject-Token'])

// print(json.dumps(response.json(), sort_keys=True, indent=4))
// print(response.headers['X-Subject-Token'])
// print(json.dumps(response.json(), sort_keys=True, indent=4))
// print(response.headers['X-Subject-Token'])`

// var tab_content = document.getElementById("tab-content");
// var day = 12;
// var lines = content.split('\n');
// var sec = 1;
// lines.forEach(line => {
//     var it = template.replace('{0}', '13:44:' + String(sec).padStart(2, '0')).replace('{1}', line);
//     tab_content.innerHTML += it;
//     sec = (1 + sec) % 60;
//     if (sec % 10 == 0) {
//         tab_content.innerHTML += `<div style="display: flex;"><div class="termdata-line"></div><p class="termdate unselectable">${day}/06/2021</p></div>`;
//         day += 1;
//     }
// });

var inputbar = document.getElementById("inputbar");
inputbar.style.display = 'none';
/*---------- Terminal ---------*/

/*---------- Gr치fico ---------*/
var tab_content = document.getElementById("tab-content");
tab_content.innerHTML += '<canvas id="chart"></canvas>';

const max_size = 100;
var labels = [];
var dataset = [];
var dataset2 = [];
for (let index = 0; index < max_size; index++) {
    labels[index] = index;
    dataset[index] = 35 + Math.random() * 2;
    dataset2[index] = 34 + Math.random() * 2;
}

var ctx = document.getElementById('chart').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: labels,
        datasets: [
        {
            label: 'Current',
            data: dataset,
            fill: false,
            borderColor: 'rgb(255, 0, 0)',
            tension: 0.1,
            pointRadius: 0,
            pointHoverRadius: 5,
            pointHoverBackgroundColor: 'rgb(255, 0, 0)',
        },
        {
            label: 'Voltage',
            data: dataset2,
            fill: false,
            borderColor: 'rgb(0, 0, 255)',
            tension: 0.1,
            pointRadius: 0,
            pointHoverRadius: 5,
            pointHoverBackgroundColor: 'rgb(0, 0, 255)',
        }],
    },
    options: {
        plugins: {
            legend: {
                position: 'bottom'
            }
        }
    }
});

document.getElementById('continue').addEventListener('click', () => {
    labels.shift();
    dataset.shift();
    dataset2.shift();

    labels.push(labels.length);
    dataset.push(35 + Math.random() * 2);
    dataset2.push(34 + Math.random() * 2);
    myChart.update('none');
});
/*---------- Gr치fico ---------*/
</script>
</html>